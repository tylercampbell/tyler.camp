---
layout: layout.page.njk
bgcolor: '#1c1917' 
---

{% svgsprite %}

<header style="height: 100lvh;" class="fixed w-full h-screen transition duration-300 -z-10">
  {% picture "ty-memoji-v1.jpg", "Tyler Campbell Memoji", "fixed w-full h-full object-cover blur scale-110 transition duration-500", "height: 100lvh;" %}
  {% svg "tylercampbell", "absolute left-0 top-0 w-full h-[75vh] fill-rose-700/25 transition duration-300" %}
  {% svg "tylercampbell", "absolute left-0 top-0 w-full h-[75vh] fill-transparent stroke-2 stroke-white scale-[0.97] transition duration-300" %}
</header>

<div style="height: 85svh;" class="h-[85vh] w-full snap-center grid place-items-center">
  <section class="w-full px-2">
    <h1 class="text-center font-mono uppercase mb-8">Tyler Campbell, the website</h1>
    {% include 'form.njk' %}
  </section>
</div>

<main id="gallery" class="mb-[33vh]">
  {% for image in gallery %}
    <article id="{{ loop.index }}" class="snap-center py-8 flex justify-center items-center">
      {% picture "gallery/"+image.src, image.name, "w-auto h-auto max-h-[80vh] max-w-[80vw] border-8 border-orange-100 ring-8 ring-stone-900", "max-height: 80svh;" %}
    </article>
  {% endfor %}
</main>

<script>
  //scrollmagic
  sm.addEventListener('load', function () {
    // init controller
    var controller = new ScrollMagic.Controller({globalSceneOptions: {duration: 0}});
    // build scenes
    new ScrollMagic.Scene({triggerElement: "#gallery",triggerHook: 0.65})
      .setClassToggle("header", "scrolled")
    .addTo(controller);
  });

  // form
  let myForm = document.querySelector('#contact form');
  let message = document.querySelector('#contact form textarea');
  let submit = document.querySelector('#contact form button');
  let success = document.querySelector('#success');
  // form - disable submit button if textarea empty
  function btnActivation(){
    if (!message.value.length) {
      submit.disabled = true;            
    } else {
      submit.disabled = false;
    }           
  }
  // form - ajax
  myForm.addEventListener('submit', e => {
    e.preventDefault();
    const formData = new FormData(myForm);
    fetch(myForm.getAttribute('action'), {
      method: 'POST',
      headers: {
        'Accept': 'application/x-www-form-urlencoded;charset=UTF-8',
        'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'
      },
      body: new URLSearchParams(formData).toString()
    })
    .then(res => {
      if (res) {
        myForm.classList.add('hidden')
        success.classList.replace('hidden', 'block')
      }
    });
  });

</script>